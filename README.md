This repository is forked and modified from https://github.com/DependableSystemsLab/pinfi. The main structure of this repo is Intel PIN tool v-3.5. Pinfi can be found at \<WHERE-YOU-CLONE-THIS-REPO\>/pinfi/source/tools/pinfi.

## Installation

- Make sure \<WHERE-YOU-CLONE-THIS-REPO\>/pinfi/pin is added to your local environment variables (.bashrc).
- In the command line, type 'make' under \<WHERE-YOU-CLONE-THIS-REPO\>/pinfi/source/tools/pinfi to compile the pinfi.
- After compiling pinfi, a folder called obj-intel64 will be created under the project folder.

## Usage

We provide a fault injection script located in example/, namely faultinject.py. We put a demo benchmark (Needle from Rodinia suite) here as an running example.
To execute this script:
```
python faultinject.py needle 100 "2048 10 2"
python faultinject.py <BENCHMARK-NAME> <NUM-OF-FI> "<PROG-INPUT>" 
```
There are several folder generated after the fault injection experiments:
  - **std_output**: std output generated by the benchmark under test.
  - **error_output**: error output generated by the benchmark under test.
  - **baseline**: golden output generated by the benchmark under test.
  - **prog_output**: file output generated by the benchmark under test.

Some setups (to-be-updated):
- Put the instructions category (default is 'all') that are desired to be fault injected in pin.instcategory.txt under the directory where faultinject.py locates, and run faultinject.py to inject faults in the specified locations. We provide an example of the pin.instcategory.txt file in example/ as well.
